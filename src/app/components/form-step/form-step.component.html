<div class="titlesPpal row">
    <div class="col-12 text-center titleOne">
            <strong>Solicita la aprobación de tu crédito para carro, rápido y sin papeles</strong>
    </div>
</div>



<mat-horizontal-stepper>
        <mat-step label="Calcula tu cuota" [stepControl]="formPs" class="primerStep" [editable]="editable" linear="true">
                            <!-- Formulario -->
                            <form #formPs="ngForm">
                                    <div class="row absolute dosStep">
                                        <div class="col-12 col-sm-12">
                                            <div class="cntTitle">
                                                <div class="title">Calcula tu cuota</div>
                                                <small>*información requerida</small>
                                            </div>
                                        <hr>

                                        </div>                                   
                                        
                                        <div class="col-12 col-sm-12">
                                                <mat-form-field class="full-width" appearance="outline">
                                                        <mat-label>¿Cuánto dinero deseas financiar?</mat-label>
                                                        <input 
                                                        matInput
                                                        currencyMask
                                                        placeholder="¿Cuánto dinero deseas financiar?"
                                                        name="valorFinanciar"
                                                        #valorFinanciar="ngModel"
                                                        [(ngModel)]="valorFinanciarCop"
                                                        [options]="{ align: 'left', prefix: '$ ', thousands: '.', decimal: ',', precision: 0 }"
                                                        [min]="minF"
                                                        required>
                                                        <mat-error *ngIf="valorFinanciar.touched && valorFinanciar.errors?.required" class="error error col-12">Inserta el valor a financiar</mat-error>   
                                                        <mat-error *ngIf="valorFinanciar.touched && valorFinanciar.errors?.min" class="error error col-12">El valor mínimo debe ser $ {{minF | number:'1.0-0'}}</mat-error>
                                                </mat-form-field>
                                        </div>

                                        <div class="col-12 col-sm-12 subTitulo">
                                            <small>¿A cuántos meses quieres pagar?*</small>
                                        </div>


                                        <div class="contPeriodo">
                                                <span class="radio">
                    
                                                                        
                                                    <input id="seis" [(ngModel)]="cuotas" name="cuotaSeis"
                                                        (click)="changeButtonCliente($event.target)"
                                                        type="radio" value="6">
                                                    <div>
                                                        <div class="mes">6 meses</div>
                                                    </div>
                                                </span>
                    
                                                <span class="radio">
                    
                                                    <input id="doce" [(ngModel)]="cuotas" name="cuotaDoce"
                                                        (click)="changeButtonCliente($event.target);"
                                                        type="radio" value="12">
                                                    <div>
                                                        <div class="mes">12 meses</div>
                                                    </div>
                                                </span>
                    
                                                <span class="radio">
                    
                                                    <input id="veinticuatro" [(ngModel)]="cuotas" name="cuotaVeinteCuatro"
                                                        (click)="changeButtonCliente($event.target);"
                                                        type="radio" value="24">
                                                    <div>
                                                        <div class="mes">24 meses</div>
                                                    </div>
                                                </span>
                    
                                                <span class="radio">

                                                    <input id="treintaSeis" [(ngModel)]="cuotas" name="cuotaTreintaSeis"
                                                        (click)="changeButtonCliente($event.target);"
                                                        type="radio" value="36">
                                                    <div>
                                                        <div class="mes">36 meses</div>
                                                    </div>
                                                </span>
                                                <span class="radio">

                                                    <input id="cuarentaocho" [(ngModel)]="cuotas" name="cuarentaOcho"
                                                        (click)="changeButtonCliente($event.target);"
                                                        type="radio" value="48">
                                                    <div>
                                                        <div class="mes">48 meses</div>
                                                    </div>
                                                </span>
                                                <span class="radio">

                                                    <input id="sesenta" [(ngModel)]="cuotas" name="sesenTa"
                                                        (click)="changeButtonCliente($event.target);"
                                                        type="radio" value="60">
                                                    <div>
                                                        <div class="mes">60 meses</div>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="col-12 col-sm-12 subTitulo">
                                                    <small>Este será el valor de la cuota mensual*</small>
                                            </div>

                                            <div class="col-12 col-sm-12">
                                                    <mat-form-field class="full-width" appearance="outline">
                                                            <input 
                                                            matInput
                                                            currencyMask
                                                            placeholder="0"
                                                            name="valorCuota"
                                                            #Valorcuota="ngModel"
                                                            [options]="{ align: 'left', prefix: '$ ', thousands: '.', decimal: ',', precision: 0 }"
                                                            [(ngModel)]="valorCuota"
                                                            required
                                                            disabled>
                                                            <mat-icon matSuffix (click)="verDetalles()">priority_high</mat-icon>
                                                        </mat-form-field>

                                                        <div class="contDetalles" *ngIf="verDetalle">
                                                           <small>Valor cuota sin seguro: $ {{valorFinanciarCop == 0 || valorFinanciarCop == undefined ? 0 : valorCuota | number:'1.0-0'}}<br>
                                                            Costo total del seguro: $ {{valorFinanciarCop == 0 || valorFinanciarCop == undefined ? 0 :seguroCuota | number:'1.0-0'}}<br>
                                                            Cuota mensual del seguro: $ {{valorFinanciarCop == 0 || valorFinanciarCop == undefined ? 0 :seguroTotal | number:'1.0-0'}}<br>
                                                            Monto total a financiar: $ {{valorFinanciarCop == 0 || valorFinanciarCop == undefined ? 0 :valorFinanciarCop | number:'1.0-0'}}<br></small>
                                                        </div>
                                            </div>
                                            
                                            <div class="col-12 col-sm-12">
                                                    <small>*Este valor corresponde al total sin seguros</small><br>
                                                    <small class="infoRequerida">*información requerida</small>
                                                    <hr>
                                            </div>                    
                                        
                                        <div class="col-12 col-sm-12 col-md-12 contButton">
                                                <button mat-button class="full-width siguiente" [disabled]="formPs.invalid || valorCuota === 0" matStepperNext>Continuar</button>
                                        </div>
                                        
                                    </div> <!-- Row -->
                                </form>
            
                            
                            
        </mat-step>

        <!-- Paso 2 -->

        <mat-step label="Ingresa tus datos" [stepControl]="formTc" [editable]="editable" linear="true">

            <form #formTc="ngForm" (ngSubmit)="sendCentrales()">
                    <div class="row absolute unoStep">
                    <div class="col-12 col-sm-12">
                        <div class="title">Cuéntanos de ti</div>
                        <hr>

                        <!-- Identificación Vendedor -->
                        <!-- <mat-form-field class="full-width">
                                <input 
                                matInput
                                type="tel"
                                name="IdentificacionVendedor"
                                [(ngModel)]="contacto.OtrosDatos.IdentificacionVendedor"
                                #identificacionVendedor="ngModel"
                                minlength="6"
                                maxlength="15"
                                placeholder="Identificación del vendedor"
                                (keypress)="oldNumbers($event)"
                                [(pattern)]="env.patternNumber"
                                required>
                                <div class="row">
                                    <small class="col-12 error" *ngIf="identificacionVendedor.touched && identificacionVendedor.errors?.required">Necesitamos saber tu número de identificación</small>
                                    <small class="col-12 error" *ngIf="identificacionVendedor.errors?.minlength">Mínimo {{identificacionVendedor.errors.minlength.requiredLength}} dígitos</small>
                                    <small class="col-12 error" *ngIf="identificacionVendedor.errors?.pattern">Ingresa un número de identificación válido</small>
                                </div>                       
                        </mat-form-field> -->

                            <!-- Identificación Vendedor -->

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>¿Cómo te llamas?</mat-label>
                        <input 
                        matInput 
                        placeholder="¿Cómo te llamas?"
                        name="Nombre1"
                        minlength="3"
                        maxlength="90"
                        [(ngModel)]="contacto.DatosBasicos.Nombre1"
                        #nombre="ngModel"
                        [(pattern)]="env.patternLetter"
                        required>
                            <mat-error class="col-12 error" *ngIf="nombre.touched && nombre.errors?.required">Necesitamos saber tu nombre</mat-error>
                            <mat-error class="col-12 error" *ngIf="nombre.touched && nombre.errors?.minlength">Ingresa un nombre más largo</mat-error>
                            <mat-error class="col-12 error" *ngIf="nombre.touched && nombre.errors?.pattern">Ingresa un nombre válido</mat-error>
                    </mat-form-field>
                    </div>

                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                            <mat-form-field class="full-width" appearance="outline">
                                    <mat-label>Tipo de Identificación</mat-label>
                                    <select 
                                        matNativeControl
                                        name="TipoDocumento"
                                        [(ngModel)]="contacto.DatosBasicos.TipoDocumento"
                                        #tipoDocumento="ngModel" 
                                        required
                                    >
                                        <option *ngFor="let obj of env.documentos" [ngValue]="obj.value" [disabled]="obj.value == 0">{{obj.name}}</option>
                                        <mat-error *ngIf="tipoDocumento.touched && tipoDocumento.errors?.required">Necesitamos saber tu tipo de identificación</mat-error>
                                    </select>
                            </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                    <mat-form-field class="full-width" appearance="outline">
                            <mat-label>Número de Identificación</mat-label>
                            <input 
                            matInput
                            type="tel"
                            name="NumeroDocumento"
                            [(ngModel)]="contacto.DatosBasicos.NumeroDocumento"
                            #numeroDocumento="ngModel"
                            minlength="6"
                            maxlength="15"
                            placeholder="Número de Identificación"
                            (keypress)="oldNumbers($event)"
                            [(pattern)]="env.patternNumber"
                            required>
                                <mat-error class="col-12 error" *ngIf="numeroDocumento.touched && numeroDocumento.errors?.required">Necesitamos saber tu número de identificación</mat-error>
                                <mat-error class="col-12 error" *ngIf="numeroDocumento.errors?.minlength">Mínimo {{numeroDocumento.errors.minlength.requiredLength}} dígitos</mat-error>
                                <mat-error class="col-12 error" *ngIf="numeroDocumento.errors?.pattern">Ingresa un número de identificación válido</mat-error>                    
                    </mat-form-field>
                    </div>

                    <div class="col-12 col-sm-12 col-12-md col-12-lg">
                        <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Teléfono de contacto</mat-label>
                                <input 
                                matInput 
                                type="tel"  
                                placeholder="Teléfono de contacto"
                                name="Celular"
                                [(ngModel)]="contacto.DatosBasicos.Celular"
                                minlength="7" 
                                maxlength="10"
                                #celular="ngModel"
                                (keypress)="oldNumbers($event)"
                                [(pattern)]="env.patternNumber"
                                required
                                >
                                    <mat-error class="col-12 error"*ngIf="celular.touched && celular.errors?.required">Necesitamos saber tu teléfono de contacto</mat-error>
                                    <mat-error class="col-12 error"*ngIf="celular.errors?.minlength">Mínimo {{celular.errors.minlength.requiredLength}} dígitos</mat-error>
                                    <mat-error class="col-12 error"*ngIf="celular.errors?.pattern">Ingresa un teléfono de contacto válido</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-12 col-sm-12 col-12-md col-12-lg">
                        <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Correo electrónico</mat-label>
                            <input
                            matInput
                            type="text"
                            placeholder="Correo electrónico"
                            name="CorreoPersonal"
                            [(ngModel)]="contacto.DatosBasicos.CorreoPersonal"
                            #correoPersonal="ngModel"
                            pattern="^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$"
                            required
                            >                                       
                            <mat-error *ngIf="correoPersonal.touched && correoPersonal.errors?.required" class="error">Necesitamos saber tu correo electrónico</mat-error>
                            <mat-error *ngIf="correoPersonal.touched && correoPersonal.errors?.pattern" class="error">Ingresa un correo electrónico válido</mat-error>                                                            
                        </mat-form-field>                                                                  
                    </div>

                    <div class="col-12 col-sm-12 col-12-md col-12-lg">
                        <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Tipo de ocupación</mat-label>
                                <select 
                                    matNativeControl
                                    name="ActividadEconomica"
                                    [(ngModel)]="contacto.DatosFinancieros.ActividadEconomica"
                                    #ocupacion="ngModel"
                                    #tipoDocumento="ngModel" 
                                    required
                                >
                                    <option *ngFor="let obj of env.ocupaciones" [ngValue]="obj.value" [disabled]="obj.value == 0">{{obj.name}}</option>
                                    <small class="col-12 error" *ngIf="ocupacion.touched && ocupacion.errors?.required">Necesitamos saber tu Ocupación</small>
                                </select>
                        </mat-form-field>
                    </div>

                    <div class="col-12 col-sm-12">
                            <mat-form-field class="full-width" appearance="outline">
                                    <mat-label>Ingresos Mensuales</mat-label>
                                    <input 
                                    matInput
                                    currencyMask
                                    [options]="{ align: 'left', prefix: '$ ', thousands: '.', decimal: ',', precision: 0 }"
                                    placeholder="Ingresos Mensuales"
                                    name="ingresoMensual"
                                    #ingresoMensual="ngModel"
                                    [(ngModel)]="contacto.DatosFinancieros.IngresoMensual"
                                    [min]="min"                                    
                                    required>                               
                                    <mat-error *ngIf="ingresoMensual.touched && ingresoMensual.errors?.required">Inserta tus ingresos mensuales</mat-error>       
                                    <mat-error *ngIf="ingresoMensual.touched && ingresoMensual.errors?.min" class="error col-12">Ingresa un valor mayor</mat-error>
                            </mat-form-field>
                    </div>


                        <div class="row">
                            <div class="col-6 col-sm-6 col-md-4 col-lg-4">
                                <img class="logSantander" src="../../../assets/costumerFinance.png" alt="">
                            </div>
                            
                            <div class="col-6 col-sm-6 col-md-8 col-lg-8">
                            <p class="tycSmall">
                                    SANTANDER CONSUMER o el TERCERO AUTORIZADO quedan autorizados para obtener información sobre mis relaciones comerciales con otras entidades y consultar mis reportes ante las centrales de información.
                            </p>    
                            </div>  
                        </div>

                        <div class="checkTycOk col-12 col-sm-12 text-center">
                            <mat-checkbox 
                            required
                            color="primary"
                            value="" 
                            id="defaultCheck1"
                            name="AutorizaConsultaCentrales"
                            [(ngModel)]="contacto.OtrosDatos.AutorizaConsultaCentrales"
                            (click)="chechedc()"
                            #autorizaConsultaCentrales="ngModel"
                            ></mat-checkbox>
                            Acepto los <strong class="pointer" (click)="modal=true">términos y condiciones</strong>
                            <hr>
                        </div>

                        <div class="col-12 col-sm-12 col-md-12 contButton">
                                <button mat-button id="stepOne" [disabled]="formTc.invalid" class="full-width siguiente" (ngSubmit)="sendCentrales()" matStepperNext>Solicitar</button>
                                <button class="col-12 full-width anterior" matStepperPrevious mat-button>Anterior</button>
                        </div>
                    </div> <!-- Row -->
                </form> 

                    <!-- Modal TYC -->
        <div class="containerModal" *ngIf="modal">
                <div class="cntTitlem">
                    <i class="arrowLeft material-icons md-48" (click)="modal=false">keyboard_arrow_left</i>
                    <p class="titleModal">Términos y condiciones</p>
                </div>
                  <hr class="hrModal">
                  <div class="btnTyc">
                    <div class="squareModal">
                          <p>Por medio de la presente manifiesto que he (hemos) leído y acepto (amos) los términos
                                y condiciones a continuación descritos para la solicitud del producto:</p><br><br>
                          <Strong>Consulta a centrales de riesgo y bases de datos</Strong><br><br>
                          <p>Autorizo(amos) de manera expresa e irrevocable a Santander Consumer (indistintamente “Santander Consumer” o “Santander”), y a quien represente sus derechos o a sus sucesores a cualquier título a: 1. Reportar, procesar, solicitar y divulgar a cualquier Operador de bases de datos e información financiera, crediticia, comercial, de servicios y proveniente de terceros países, toda la información referente a mi (nuestro) comportamiento como cliente(s) o prospecto de clientes de Banco Santander, de conformidad con los reglamentos a los cuales se sujeten las entidades antes mencionadas y la normatividad vigente sobre bases de datos. 2. Consultar ante cualquier Operador de bases de datos e información financiera, crediticia, comercial, de servicios y proveniente de terceros países mi (nuestro) endeudamiento directo o indirecto con las entidades financieras del país así como la información disponible sobre el cumplimiento o manejo dado a mis (nuestros) compromisos y obligaciones con dicho sector. 3. Conservar, tanto en Banco Santander, como en los Operadores de bases de datos e información financiera, crediticia, comercial, de servicios y proveniente de terceros países, con las debidas actualizaciones y durante el periodo necesario señalado en las disposiciones legales o en sus reglamentos, la información indicada en los numerales (1) y (2) anteriores. 4. Suministrar a cualquier Operador de bases de datos e información financiera, crediticia, comercial, de servicios y proveniente de terceros países, información relativa a mis (nuestras) solicitud(es) de crédito así como datos atinentes a mis (nuestras) relaciones comerciales, financieras y en general socioeconómicas que haya(mos) entregado o que consten en registros públicos, bases de datos públicas o documentos públicos. 5. Suministrar toda la información consultada y almacenada por Banco Santander, a quien represente sus derechos o a sus sucesores a cualquier título, a las matrices, filiales o subordinadas de la matriz y demás entidades vinculadas con el mismo grupo, así como a terceros para fines comerciales. Declaro(amos) que conozco(conocemos) y acepto(amos) que los reportes negativos que Banco Santander, a cualquier título realice a cualquier Operador de bases de datos e información financiera, crediticia, comercial, de servicios y proveniente de terceros países, pueden generar consecuencias negativas en su acceso al crédito y demás servicios financieros, así como conozco(conocemos) el derecho que me(nos) asiste de solicitar rectificación y actualización de la información cuando esta no corresponda con la realidad crediticia, sin que tal derecho implique revocatoria alguna de las autorizaciones que se confieren a Banco Santander. <p>
                          <Strong>Consulta a Mareigua Ltda. </Strong><br><br>
                          <p>Entiendo(emos) y acepto(amos) que Santander Consumer (en adelante Santander), aliado en el proceso de crédito de vehículo, informa que tiene publicadas sus políticas de recolección, uso, y administración de la información personal en la página www.santander.com.co El o los titulares de la información personal informan a Santander que en desarrollo de los pagos efectuados de aportes al Sistema de Protección Social, en desarrollo de la autoliquidación y pagos o de la liquidación por parte de un eventual empleador, han entregado su información personal al diligenciar la Planilla Integrada de Liquidación de Aportes -PILA- información relacionada con los ingresos mensuales base de cotización, pagos a través del PILA y otros datos financieros. Con base en lo anterior, el (los) titular(es)de la información confiere(n) autorización a Santander para tratar su información personal, recolectar, transferir, almacenar, usar, circular, suprimir, compartir, actualizar, y transmitir la información personal con los siguientes fines: 1) Análisis de riesgos financieros, para ofrecimiento de productos financieros; 2) Para el procesamiento de la información y con el resultado, se entreguen reportes a los establecimientos de crédito aliados de Santander para que se analice y decida sobre el otorgamiento de productos financieros; 3) Para recolectar datos personales, consultarlos, procesarlos, divulgarlos y mantenerlos, en cualquier operador de base de datos. Se reconoce y acepta que los datos objeto de tratamiento, pueden llegar a quedar alojados fuera de Colombia, en virtud de contratos o procesamiento de tal información con responsables de tal manejo fuera de Colombia, caso en el cual Santander entregará información bajo la existencia de un contrato y a responsables ubicados en países con un nivel de protección de datos similar o superior al existente en Colombia. Se deja expresa constancia que la presente autorización puede ser revocada por el usuario y titular de la información personal, en la medida que se cumplan los requisitos legales para tal revocatoria. Lo anterior se encuentra de conformidad con la Ley 1581 de 2012. </p>
                    </div>                    

                    <div class="col-12 col-sm-12 col-md-12 contButton">
                            <button mat-button class="full-width siguiente" (click)="checkTyc()">Aceptar</button>
                    </div>  
                </div>            
        </div>






        <!-- Finaliza Modal TYC -->

                <!-- </form>  -->
        </mat-step><!-- Finaliza Paso 2 -->
        
<!-- Paso 3 --><mat-step label="Respuesta inmediata" completed="false">

        <div *ngIf="sppiner" class="col-12 spinnerCont">
            <mat-spinner></mat-spinner>
        </div> 

        <div class="row absolute tresStep">
                <div class="text-center col-12 col-sm-12">                    
                    <div *ngIf="aprobado" class="col-12 container text-center animated fadeIn">                                     
                        <p class="title">¡listo!</p>
                        <hr>  
                        <img class="img-fluid" src="../../../assets/aprobado.png" alt="">
                        <p class="aprobado">¡Tu solicitud es viable!</p>
                        <p class="small">
                        En menos de 24 horas uno de nuestros asesores se comunicará contigo para continuar tu solicitud de crédito 
                        </p>
                        <hr>                    
                    </div>
                
                <!-- Negado -->
                
                <div *ngIf="negado" class="col-12 container text-center animated fadeIn">
                    <p class="title">¡listo!</p>
                    <hr>  
                    <img class="img-fluid" src="../../../assets/negado.png" alt="">
                    <p class="negado">¡Tu solicitud ha sido rechazada!</p>
                    <p class="small">
                        Uno de nuestros asesores se comunicarán contigo para explorar alternativas 
                    </p>
                    <hr>
                </div>

                <div class="col-12 col-sm-12 col-md-12 contButton">
                    <button mat-button class="full-width siguiente" id="stepTwo" (click)="reload()">Finalizar</button>
                </div>
          </div>
        </div>
        </mat-step><!-- Finaliza Paso 3 -->        
    </mat-horizontal-stepper>

    <div class="row">
            <div class="col-12 text-center pie">
                    <div class="container">
                    <img src="../assets/santandergris.png" alt="" class="col-12 santanderGray"><br>
                    <p class="small">© 2019 - Solicitud de Crédito - Entidad Vigilada por la Superintendencia Financiera de Colombia</p>
                    </div>
            </div>
    </div>
            
            

      